<!DOCTYPE html>
<html lang="ru" dir="ltr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="theme-color" content="#ffffff">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
  <title>CarFact</title>
  <style>
    :root {
      --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      --primary: #1d1d1f;
      --text: #1d1d1f;
      --light-text: #86868b;
      --bg: #ffffff;
      --card-bg: #f5f5f7;
      --accent: #0071e3;
      --border: #e5e5ea;
    }

    [data-theme="dark"] {
      --primary: #f5f5f7;
      --text: #f5f5f7;
      --light-text: #aeaeb2;
      --bg: #000000;
      --card-bg: #1c1c1e;
      --border: #3a3a3c;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: var(--font-sans);
      font-weight: 400;
      background-color: var(--bg);
      color: var(--text);
      line-height: 1.45;
      padding: 1.5rem 1rem;
      max-width: 820px;
      margin: 0 auto;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    h1, h2, h3, h4 {
      font-weight: 600;
      letter-spacing: -0.02em;
    }

    h1 { font-size: 2rem; }
    h2 { font-size: 1.25rem; margin-bottom: 1rem; }
    h3 { font-size: 1.1rem; margin: 1rem 0 0.5rem; }
    h4 { font-size: 1.05rem; margin: 0.8rem 0 0.4rem; font-weight: 500; }

    header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 1.8rem;
      gap: 1rem;
    }

    .logo h1 {
      font-weight: 600;
    }

    .controls {
      display: flex;
      gap: 0.6rem;
    }

    .control-btn {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      border: none;
      background: var(--card-bg);
      color: var(--light-text);
      font-family: var(--font-sans);
      font-size: 14px;
      font-weight: 600;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }

    .subtitle {
      color: var(--light-text);
      font-size: 0.95rem;
      font-weight: 400;
      margin-top: 0.4rem;
    }

    .input-group {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }

    label {
      font-size: 0.9rem;
      color: var(--light-text);
      font-weight: 500;
    }

    input {
      padding: 0.8rem 1rem;
      font-family: var(--font-sans);
      font-size: 1rem;
      font-weight: 400;
      border: 1px solid var(--border);
      border-radius: 12px;
      background: var(--card-bg);
      color: var(--text);
    }

    button.primary {
      font-family: var(--font-sans);
      background: var(--accent);
      color: white;
      border: none;
      border-radius: 12px;
      padding: 0.85rem 1.1rem;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
    }

    #result {
      margin-top: 1.5rem;
      display: none;
    }

    .card {
      background: var(--card-bg);
      border-radius: 16px;
      padding: 1.4rem;
      margin-bottom: 1.2rem;
      border: 1px solid var(--border);
    }

    .card ul {
      list-style: none;
      padding-left: 0;
    }

    .card li {
      padding: 0.4rem 0;
      font-size: 0.95rem;
    }

    .small {
      font-size: 0.85rem;
      color: var(--light-text);
    }
  </style>
</head>
<body>
  <header>
    <div class="logo">
      <h1 id="pageTitle">CarFact</h1>
      <p class="subtitle" id="pageSubtitle">Enter VIN or mileage ‚Äî see what to service and which parts to use</p>
    </div>
    <div class="controls">
      <button id="langToggle" class="control-btn">RU</button>
      <button id="themeToggle" class="control-btn">‚òÄÔ∏è</button>
    </div>
  </header>

  <div class="input-group">
    <label for="vin" id="labelVin">VIN / –ú–æ–¥–µ–ª—å (–Ω–∞–ø—Ä.: Prius 2021)</label>
    <input type="text" id="vin" placeholder="JTDKN3DU3M3123456 –∏–ª–∏ Prius 2021">
    <label for="mileage" id="labelMileage">–ü—Ä–æ–±–µ–≥ (–∫–º)</label>
    <input type="number" id="mileage" placeholder="45000" min="0" max="500000">
    <button id="submitBtn" class="primary">–ü–æ–∫–∞–∑–∞—Ç—å –¢–û</button>
  </div>

  <div id="result"></div>

  <script>
    // === –ü–û–õ–ù–ê–Ø –õ–û–ö–ê–õ–ò–ó–ê–¶–ò–Ø ===
    const translations = {
      ru: {
        title: "CarFact",
        subtitle: "–í–≤–µ–¥–∏—Ç–µ VIN –∏–ª–∏ –ø—Ä–æ–±–µ–≥ ‚Äî —É–∑–Ω–∞–π—Ç–µ, —á—Ç–æ –º–µ–Ω—è—Ç—å –∏ –∫–∞–∫–∏–µ –∑–∞–ø—á–∞—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å",
        labelVin: "VIN / –ú–æ–¥–µ–ª—å (–Ω–∞–ø—Ä.: Prius 2021)",
        labelMileage: "–ü—Ä–æ–±–µ–≥ (–∫–º)",
        btnSubmit: "–ü–æ–∫–∞–∑–∞—Ç—å –¢–û",
        nextTO: "–°–ª–µ–¥—É—é—â–µ–µ –¢–û",
        dueIn: "—á–µ—Ä–µ–∑",
        km: "–∫–º",
        overdue: "–ø—Ä–æ—Å—Ä–æ—á–µ–Ω–æ –Ω–∞",
        oil: "–ú–æ—Ç–æ—Ä–Ω–æ–µ –º–∞—Å–ª–æ",
        filters: "–§–∏–ª—å—Ç—Ä—ã",
        oilFilter: "–ú–∞—Å–ª—è–Ω—ã–π",
        airFilter: "–í–æ–∑–¥—É—à–Ω—ã–π",
        cabinFilter: "–°–∞–ª–æ–Ω–Ω—ã–π",
        fuelFilter: "–¢–æ–ø–ª–∏–≤–Ω—ã–π",
        sparkPlugs: "–°–≤–µ—á–∏ –∑–∞–∂–∏–≥–∞–Ω–∏—è",
        brakes: "–¢–æ—Ä–º–æ–∑–Ω—ã–µ –∫–æ–ª–æ–¥–∫–∏",
        brakeFront: "–ü–µ—Ä–µ–¥–Ω–∏–µ",
        brakeRear: "–ó–∞–¥–Ω–∏–µ",
        timing: "–ì–†–ú",
        chain: "—Ü–µ–ø—å",
        belt: "—Ä–µ–º–µ–Ω—å",
        wheels: "–ö–æ–ª—ë—Å–∞ –∏ –¥–∞–≤–ª–µ–Ω–∏–µ",
        tireSize: "–†–∞–∑–º–µ—Ä —à–∏–Ω",
        pressure: "–î–∞–≤–ª–µ–Ω–∏–µ (–±–∞—Ä)",
        front: "–ø–µ—Ä–µ–¥",
        rear: "–∑–∞–¥",
        recommendations: "–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏",
        inspectAt: "–ü—Ä–æ–≤–µ—Ä–∫–∞ ‚Äî",
        replaceAt: "–ó–∞–º–µ–Ω–∞ ‚Äî",
        every: "–∫–∞–∂–¥—ã–µ",
        at: "–Ω–∞"
      },
      en: {
        title: "CarFact",
        subtitle: "Enter VIN or mileage ‚Äî see what to service and which parts to use",
        labelVin: "VIN / Model (e.g. Prius 2021)",
        labelMileage: "Mileage (km)",
        btnSubmit: "Show Maintenance",
        nextTO: "Next Service",
        dueIn: "due in",
        km: "km",
        overdue: "overdue by",
        oil: "Engine Oil",
        filters: "Filters",
        oilFilter: "Oil",
        airFilter: "Air",
        cabinFilter: "Cabin",
        fuelFilter: "Fuel",
        sparkPlugs: "Spark Plugs",
        brakes: "Brake Pads",
        brakeFront: "Front",
        brakeRear: "Rear",
        timing: "Timing System",
        chain: "chain",
        belt: "belt",
        wheels: "Wheels & Tire Pressure",
        tireSize: "Tire size",
        pressure: "Pressure (bar)",
        front: "Front",
        rear: "Rear",
        recommendations: "Notes",
        inspectAt: "Inspect at",
        replaceAt: "Replace at",
        every: "every",
        at: "at"
      }
    };

    // –ì–ª–æ–±–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    let currentLang = 'ru';
    let currentTheme = 'light';
    let lastQuery = { carKey: null, mileage: 0 };

    // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
    function t(key) {
      return translations[currentLang][key] || key;
    }

    function human(km) {
      const k = Math.floor(km / 1000);
      if (km >= 1000) {
        return currentLang === 'ru' ? `${k} —Ç—ã—Å. ${t('km')}` : `${k}k ${t('km')}`;
      }
      return `${km} ${t('km')}`;
    }

    function setLanguage(lang) {
      currentLang = lang;
      document.documentElement.lang = lang;
      document.getElementById('langToggle').textContent = lang === 'ru' ? 'RU' : 'EN';
      updateUITexts();
      if (lastQuery.carKey) {
        renderReport(lastQuery.carKey, lastQuery.mileage);
      }
    }

    function setTheme(theme) {
      currentTheme = theme;
      document.documentElement.setAttribute('data-theme', theme);
      document.getElementById('themeToggle').textContent = theme === 'dark' ? 'üåô' : '‚òÄÔ∏è';
      const meta = document.querySelector('meta[name="theme-color"]');
      if (meta) meta.setAttribute('content', theme === 'dark' ? '#000000' : '#ffffff');
    }

    function updateUITexts() {
      document.getElementById('pageTitle').textContent = t('title');
      document.getElementById('pageSubtitle').textContent = t('subtitle');
      document.getElementById('labelVin').textContent = t('labelVin');
      document.getElementById('labelMileage').textContent = t('labelMileage');
      document.getElementById('submitBtn').textContent = t('btnSubmit');
      document.title = t('title');
    }

    // === –î–ê–ù–ù–´–ï –ê–í–¢–û ===
    const cars = {
      "prius 2021": {
        name: { ru: "Toyota Prius (2021)", en: "Toyota Prius (2021)" },
        intervals: 10000,
        oil: { every: 10000, type: "0W-20", brands: ["Toyota Genuine 0W-20", "Mobil 1 0W-20"] },
        filters: {
          oil: { interval: 10000, parts: ["Toyota 04152-YZZA1", "Mann W 719/77"] },
          air: { interval: 20000, parts: ["Toyota 17801-YZZ050", "Mann C 25 017"] },
          cabin: { interval: 20000, parts: ["Toyota 87139-YZZ010", "Mann CU 2755"] },
          fuel: { interval: 40000, parts: ["Toyota 23390-0L010"] }
        },
        sparkPlugs: { interval: 100000, parts: ["NGK LFR6AIX-11"] },
        brakePads: {
          front: { interval: 40000, parts: ["Toyota 04465-0K060", "TRW GDB3469"] },
          rear: { interval: 60000, parts: ["Toyota 04466-0K060", "TRW GDB3470"] }
        },
        timing: { type: "chain", check: 100000, replace: 200000 },
        tires: { size: "195/65 R15", pressure: { front: "2.3", rear: "2.2" } },
        notes: {
          ru: ["HV-–±–∞—Ç–∞—Ä–µ—è: –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 40 000 –∫–º"],
          en: ["HV battery: inspect every 40,000 km"]
        }
      },
      "fit 2020": {
        name: { ru: "Honda Fit (2020)", en: "Honda Fit (2020)" },
        intervals: 10000,
        oil: { every: 10000, type: "0W-20", brands: ["Honda 0W-20"] },
        filters: {
          oil: { interval: 10000, parts: ["Honda 15400-PLM-A02", "Mann W 701/61"] },
          air: { interval: 20000, parts: ["Honda 17220-PLM-A01"] },
          cabin: { interval: 20000, parts: ["Honda 17641-PLM-A01"] }
        },
        sparkPlugs: { interval: 100000, parts: ["NGK SILZKR7B11"] },
        brakePads: {
          front: { interval: 35000, parts: ["Honda 45022-TG5-A01", "Akebono ACT1108"] },
          rear: { interval: 50000, parts: ["Honda 43022-TG5-A01", "TRW GDB2278"] }
        },
        timing: { type: "belt", check: 60000, replace: 120000 },
        tires: { size: "185/60 R15", pressure: { front: "2.3", rear: "2.2" } },
        notes: {
          ru: ["CVT-–∂–∏–¥–∫–æ—Å—Ç—å: –∑–∞–º–µ–Ω–∞ —á–µ—Ä–µ–∑ 100 000 –∫–º"],
          en: ["CVT fluid: replace at 100,000 km"]
        }
      },
      "escudo 2015": {
        name: { ru: "Suzuki Escudo (2015)", en: "Suzuki Vitara (2015)" },
        intervals: 15000,
        oil: { every: 15000, type: "5W-30", brands: ["Suzuki 5W-30", "Shell Helix Ultra"] },
        filters: {
          oil: { interval: 15000, parts: ["Suzuki 16510-85G00", "Mann W 9004"] },
          air: { interval: 30000, parts: ["Suzuki 13780-87J00"] },
          cabin: { interval: 30000, parts: ["Suzuki 15530-87J00"] }
        },
        sparkPlugs: { interval: 60000, parts: ["NGK LKAR8AIX-9"] },
        brakePads: {
          front: { interval: 45000, parts: ["Suzuki 52021-85G00", "TRW GDB4418"] },
          rear: { interval: 65000, parts: ["Suzuki 52022-85G00"] }
        },
        timing: { type: "belt", check: 60000, replace: 100000 },
        tires: { size: "215/60 R17", pressure: { front: "2.3", rear: "2.3" } },
        notes: {
          ru: ["–ü–æ–ª–Ω—ã–π –ø—Ä–∏–≤–æ–¥: –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–¥–∞—Ç–∫–∏ –∫–∞–∂–¥—ã–µ 30 000 –∫–º"],
          en: ["4WD: inspect transfer case every 30,000 km"]
        }
      },
      "xv 2019": {
        name: { ru: "Subaru XV (2019)", en: "Subaru XV (2019)" },
        intervals: 10000,
        oil: { every: 10000, type: "0W-20", brands: ["Subaru 0W-20", "Idemitsu Zepro"] },
        filters: {
          oil: { interval: 10000, parts: ["Subaru 15208AA160", "Mann W 701/60"] },
          air: { interval: 20000, parts: ["Subaru 16546AA060"] },
          cabin: { interval: 20000, parts: ["Subaru H7110AC000"] }
        },
        sparkPlugs: { interval: 100000, parts: ["NGK SILZFR6A11"] },
        brakePads: {
          front: { interval: 40000, parts: ["Subaru 26295FG000", "TRW GDB3788"] },
          rear: { interval: 55000, parts: ["Subaru 26625FG000"] }
        },
        timing: { type: "chain", check: 100000 },
        tires: { size: "225/55 R18", pressure: { front: "2.4", rear: "2.3" } },
        notes: {
          ru: ["–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–≤–µ—Å–∫–∏ –∫–∞–∂–¥—ã–µ 20 000 –∫–º"],
          en: ["Inspect suspension every 20,000 km"]
        }
      },
      "c200 2019": {
        name: { ru: "Mercedes C200 (2019)", en: "Mercedes-Benz C200 (2019)" },
        intervals: 15000,
        oil: { every: 15000, type: "0W-30 (MB 229.52)", brands: ["Mercedes 229.52", "Mobil 1 ESP"] },
        filters: {
          oil: { interval: 15000, parts: ["Mercedes A 001 184 66 02", "Mann W 913/2"] },
          air: { interval: 30000, parts: ["Mercedes A 000 094 20 04"] },
          cabin: { interval: 30000, parts: ["Mercedes A 000 830 62 05"] }
        },
        sparkPlugs: { interval: 60000, parts: ["Bosch FQR8LE2+"] },
        brakePads: {
          front: { interval: 50000, parts: ["Mercedes A 006 420 76 20", "Bosch 0 986 AB4 274"] },
          rear: { interval: 70000, parts: ["Mercedes A 006 420 25 20"] }
        },
        timing: { type: "chain", check: 120000 },
        tires: { size: "225/50 R17 (F), 245/45 R17 (R)", pressure: { front: "2.3", rear: "2.4" } },
        notes: {
          ru: ["–û—Ö–ª–∞–∂–¥–∞—é—â–∞—è –∂–∏–¥–∫–æ—Å—Ç—å: –∑–∞–º–µ–Ω–∞ 150 000 –∫–º"],
          en: ["Coolant: replace at 150,000 km"]
        }
      }
    };

    function findCar(query) {
      const q = query.toLowerCase();
      if (q.includes('prius') && (q.includes('2021') || q.includes('21'))) return 'prius 2021';
      if (q.includes('fit') && q.includes('2020')) return 'fit 2020';
      if ((q.includes('escudo') || q.includes('vitara')) && q.includes('2015')) return 'escudo 2015';
      if (q.includes('xv') && q.includes('2019')) return 'xv 2019';
      if (q.includes('c200') && q.includes('2019')) return 'c200 2019';
      return null;
    }

    function renderReport(carKey, mileage) {
      const car = cars[carKey];
      const nextTO = Math.ceil(mileage / car.intervals) * car.intervals;
      const diff = nextTO - mileage;
      const isOverdue = diff < 0;

      let html = `
        <div class="card" style="border-left: 4px solid var(--accent);">
          <h2>${t('nextTO')}</h2>
          <p style="font-size:1.4rem;font-weight:600;">
            ${human(nextTO)}
            <br><small>
              ${isOverdue ? t('overdue') : t('dueIn')} ${Math.abs(diff)} ${t('km')}
            </small>
          </p>
        </div>
      `;

      // –ú–∞—Å–ª–æ
      html += `<div class="card"><h3>${t('oil')}</h3><p>${car.oil.type} ‚Äî ${t('every')} ${human(car.oil.every)}</p><p class="small">${car.oil.brands.join(', ')}</p></div>`;

      // –§–∏–ª—å—Ç—Ä—ã
      html += `<div class="card"><h3>${t('filters')}</h3><ul>`;
      html += `<li>${t('oilFilter')} ‚Äî ${t('at')} ${human(car.filters.oil.interval)}<br><span class="small">${car.filters.oil.parts.join(', ')}</span></li>`;
      html += `<li>${t('airFilter')} ‚Äî ${t('at')} ${human(car.filters.air.interval)}<br><span class="small">${car.filters.air.parts.join(', ')}</span></li>`;
      html += `<li>${t('cabinFilter')} ‚Äî ${t('at')} ${human(car.filters.cabin.interval)}<br><span class="small">${car.filters.cabin.parts.join(', ')}</span></li>`;
      if (car.filters.fuel) {
        html += `<li>${t('fuelFilter')} ‚Äî ${t('at')} ${human(car.filters.fuel.interval)}<br><span class="small">${car.filters.fuel.parts.join(', ')}</span></li>`;
      }
      html += `</ul></div>`;

      // –¢–æ—Ä–º–æ–∑–∞
      html += `
        <div class="card">
          <h3>${t('brakes')}</h3>
          <h4>${t('brakeFront')}</h4>
          <p>${t('replaceAt')} ${human(car.brakePads.front.interval)}</p>
          <p class="small">${car.brakePads.front.parts.join(', ')}</p>
          <h4>${t('brakeRear')}</h4>
          <p>${t('replaceAt')} ${human(car.brakePads.rear.interval)}</p>
          <p class="small">${car.brakePads.rear.parts.join(', ')}</p>
        </div>
      `;

      // –°–≤–µ—á–∏
      if (car.sparkPlugs) {
        html += `<div class="card"><h3>${t('sparkPlugs')}</h3><p>${t('replaceAt')} ${human(car.sparkPlugs.interval)}</p><p class="small">${car.sparkPlugs.parts.join(', ')}</p></div>`;
      }

      // –ì–†–ú
      if (car.timing) {
        const type = car.timing.type === "chain" ? t('chain') : t('belt');
        html += `<div class="card"><h3>${t('timing')} (${type})</h3><p>${t('inspectAt')} ${human(car.timing.check)}`;
        if (car.timing.replace) {
          html += `<br>${t('replaceAt')} ${human(car.timing.replace)}`;
        }
        html += `</p></div>`;
      }

      // –ö–æ–ª—ë—Å–∞
      if (car.tires) {
        html += `
          <div class="card">
            <h3>${t('wheels')}</h3>
            <ul>
              <li>${t('tireSize')}: <b>${car.tires.size}</b></li>
              <li>${t('pressure')}: ${t('front')} ‚Äî <b>${car.tires.pressure.front}</b>, ${t('rear')} ‚Äî <b>${car.tires.pressure.rear}</b></li>
            </ul>
          </div>
        `;
      }

      // –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
      if (car.notes && car.notes[currentLang] && car.notes[currentLang].length) {
        html += `<div class="card"><h3>${t('recommendations')}</h3><ul>`;
        car.notes[currentLang].forEach(n => html += `<li>${n}</li>`);
        html += `</ul></div>`;
      }

      document.getElementById('result').innerHTML = html;
      document.getElementById('result').style.display = 'block';
      lastQuery = { carKey, mileage };
    }

    // === –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ===
    setTheme(currentTheme);
    setLanguage(currentLang);

    // === –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò ===
    document.getElementById('langToggle').addEventListener('click', () => {
      setLanguage(currentLang === 'ru' ? 'en' : 'ru');
    });

    document.getElementById('themeToggle').addEventListener('click', () => {
      setTheme(currentTheme === 'light' ? 'dark' : 'light');
    });

    document.getElementById('submitBtn').addEventListener('click', () => {
      const vin = document.getElementById('vin').value.trim();
      const mileage = parseInt(document.getElementById('mileage').value) || 0;

      if (!vin) return alert(t('labelVin') + '?');
      if (mileage < 0 || mileage > 500000) return alert(t('labelMileage') + ': 0‚Äì500,000 km');

      const carKey = findCar(vin);
      if (carKey && cars[carKey]) {
        renderReport(carKey, mileage);
      } else {
        const msg = currentLang === 'ru' 
          ? '<h2>–ê–≤—Ç–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</h2><p>–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ: Prius 2021, Fit 2020, Escudo 2015, XV 2019, C200 2019</p>' 
          : '<h2>Not found</h2><p>Supported: Prius 2021, Fit 2020, Escudo 2015, XV 2019, C200 2019</p>';
        document.getElementById('result').innerHTML = `<div class="card">${msg}</div>`;
        document.getElementById('result').style.display = 'block';
        lastQuery = { carKey: null, mileage: 0 };
      }
    });

    document.addEventListener('keypress', e => {
      if (e.key === 'Enter') document.getElementById('submitBtn').click();
    });
  </script>
</body>
</html>