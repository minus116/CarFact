<!DOCTYPE html>
<html lang="ru" dir="ltr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="theme-color" content="#ffffff">
  <title>–ê–≤—Ç–æ –¢–û</title>
  <style>
    :root {
      --primary: #1d1d1f;
      --text: #1d1d1f;
      --light-text: #86868b;
      --bg: #ffffff;
      --card-bg: #f5f5f7;
      --accent: #0071e3;
      --border: #e5e5ea;
    }

    [data-theme="dark"] {
      --primary: #f5f5f7;
      --text: #f5f5f7;
      --light-text: #aeaeb2;
      --bg: #000000;
      --card-bg: #1c1c1e;
      --border: #3a3a3c;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'SF Pro', 'Segoe UI', sans-serif;
      background-color: var(--bg);
      color: var(--text);
      line-height: 1.5;
      padding: 1.5rem 1rem;
      max-width: 820px;
      margin: 0 auto;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 1.8rem;
      gap: 1rem;
    }

    .logo h1 {
      font-weight: 600;
      font-size: 2rem;
    }

    .controls { display: flex; gap: 0.6rem; }
    .control-btn {
      width: 36px; height: 36px;
      border-radius: 50%;
      border: none;
      background: var(--card-bg);
      color: var(--light-text);
      font-size: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }

    .subtitle { color: var(--light-text); font-size: 0.95rem; margin-top: 0.4rem; }

    .input-group { display: flex; flex-direction: column; gap: 1rem; margin-bottom: 1.5rem; }
    label { font-size: 0.9rem; color: var(--light-text); font-weight: 500; }
    input {
      padding: 0.8rem 1rem;
      font-size: 1rem;
      border: 1px solid var(--border);
      border-radius: 12px;
      background: var(--card-bg);
      color: var(--text);
    }

    button.primary {
      background: var(--accent);
      color: white;
      border: none;
      border-radius: 12px;
      padding: 0.85rem 1.1rem;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
    }

    #result { margin-top: 1.5rem; display: none; }

    .card {
      background: var(--card-bg);
      border-radius: 16px;
      padding: 1.4rem;
      margin-bottom: 1.2rem;
      border: 1px solid var(--border);
    }

    .card h2, .card h3 {
      font-size: 1.25rem;
      margin-bottom: 1rem;
      font-weight: 600;
    }

    .card ul { list-style: none; padding-left: 0; }
    .card li {
      padding: 0.4rem 0;
      font-size: 0.95rem;
    }

    .highlight { color: var(--accent); font-weight: 600; }
    .info { color: var(--light-text); font-size: 0.9rem; }
    .small { font-size: 0.85rem; color: var(--light-text); }
  </style>
</head>
<body>
  <header>
    <div class="logo">
      <h1 id="pageTitle">–ê–≤—Ç–æ –¢–û</h1>
      <p class="subtitle" id="pageSubtitle">–í–≤–µ–¥–∏—Ç–µ VIN –∏–ª–∏ –ø—Ä–æ–±–µ–≥ ‚Äî —É–∑–Ω–∞–π—Ç–µ, —á—Ç–æ –º–µ–Ω—è—Ç—å –∏ –∫–∞–∫–∏–µ –∑–∞–ø—á–∞—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å</p>
    </div>
    <div class="controls">
      <button id="langToggle" class="control-btn">üá∑üá∫</button>
      <button id="themeToggle" class="control-btn">‚òÄÔ∏è</button>
    </div>
  </header>

  <div class="input-group">
    <label for="vin" id="labelVin">VIN / –ú–æ–¥–µ–ª—å (–Ω–∞–ø—Ä.: Prius 2021)</label>
    <input type="text" id="vin" placeholder="JTDKN3DU3M3123456 –∏–ª–∏ Prius 2021">
    <label for="mileage" id="labelMileage">–ü—Ä–æ–±–µ–≥ (–∫–º)</label>
    <input type="number" id="mileage" placeholder="45000" min="0" max="500000">
    <button id="submitBtn" class="primary">–ü–æ–∫–∞–∑–∞—Ç—å –¢–û</button>
  </div>

  <div id="result"></div>

  <script>
    const translations = {
      ru: {
        title: "–ê–≤—Ç–æ –¢–û",
        subtitle: "–í–≤–µ–¥–∏—Ç–µ VIN –∏–ª–∏ –ø—Ä–æ–±–µ–≥ ‚Äî —É–∑–Ω–∞–π—Ç–µ, —á—Ç–æ –º–µ–Ω—è—Ç—å –∏ –∫–∞–∫–∏–µ –∑–∞–ø—á–∞—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å",
        labelVin: "VIN / –ú–æ–¥–µ–ª—å (–Ω–∞–ø—Ä.: Prius 2021)",
        labelMileage: "–ü—Ä–æ–±–µ–≥ (–∫–º)",
        btnSubmit: "–ü–æ–∫–∞–∑–∞—Ç—å –¢–û",
        nextTO: "–°–ª–µ–¥—É—é—â–µ–µ –¢–û",
        dueIn: "—á–µ—Ä–µ–∑",
        km: "–∫–º",
        overdue: "–ø—Ä–æ—Å—Ä–æ—á–µ–Ω–æ –Ω–∞",
        oil: "–ú–æ—Ç–æ—Ä–Ω–æ–µ –º–∞—Å–ª–æ",
        filters: "–§–∏–ª—å—Ç—Ä—ã",
        sparkPlugs: "–°–≤–µ—á–∏ –∑–∞–∂–∏–≥–∞–Ω–∏—è",
        brakes: "–¢–æ—Ä–º–æ–∑–Ω—ã–µ –∫–æ–ª–æ–¥–∫–∏",
        brakeFront: "–ü–µ—Ä–µ–¥–Ω–∏–µ",
        brakeRear: "–ó–∞–¥–Ω–∏–µ",
        timing: "–ì–†–ú",
        wheels: "–ö–æ–ª—ë—Å–∞ –∏ –¥–∞–≤–ª–µ–Ω–∏–µ",
        recommendations: "–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏"
      },
      en: {
        title: "Car Maintenance",
        subtitle: "Enter VIN or mileage ‚Äî see service items and OEM parts",
        labelVin: "VIN / Model (e.g. Prius 2021)",
        labelMileage: "Mileage (km)",
        btnSubmit: "Show Maintenance",
        nextTO: "Next Service",
        dueIn: "due in",
        km: "km",
        overdue: "overdue by",
        oil: "Engine Oil",
        filters: "Filters",
        sparkPlugs: "Spark Plugs",
        brakes: "Brake Pads",
        brakeFront: "Front",
        brakeRear: "Rear",
        timing: "Timing System",
        wheels: "Wheels & Tire Pressure",
        recommendations: "Notes"
      }
    };

    let currentLang = 'ru';
    let currentTheme = 'light';

    function setLanguage(lang) {
      currentLang = lang;
      document.documentElement.lang = lang;
      document.getElementById('langToggle').textContent = lang === 'ru' ? 'üá∑üá∫' : 'üá¨üáß';
      updateTexts();
    }

    function setTheme(theme) {
      currentTheme = theme;
      document.documentElement.setAttribute('data-theme', theme);
      document.getElementById('themeToggle').textContent = theme === 'dark' ? 'üåô' : '‚òÄÔ∏è';
      const meta = document.querySelector('meta[name="theme-color"]');
      if (meta) meta.setAttribute('content', theme === 'dark' ? '#000000' : '#ffffff');
    }

    function updateTexts() {
      const t = translations[currentLang];
      document.getElementById('pageTitle').textContent = t.title;
      document.getElementById('pageSubtitle').textContent = t.subtitle;
      document.getElementById('labelVin').textContent = t.labelVin;
      document.getElementById('labelMileage').textContent = t.labelMileage;
      document.getElementById('submitBtn').textContent = t.btnSubmit;
      document.title = t.title;
    }

    // === –î–ê–ù–ù–´–ï –ê–í–¢–û –° –ê–†–¢–ò–ö–£–õ–ê–ú–ò –ö–û–õ–û–î–û–ö ===
    const cars = {
      "prius 2021": {
        name: { ru: "Toyota Prius (2021)", en: "Toyota Prius (2021)" },
        intervals: 10000,
        oil: {
          every: 10000,
          type: "0W-20",
          brands: ["Toyota Genuine 0W-20 (08885-02306)", "Mobil 1 0W-20", "Castrol EDGE 0W-20"]
        },
        filters: {
          oil: { interval: 10000, parts: ["Toyota 04152-YZZA1", "Mann W 719/77", "Bosch 3323"] },
          air: { interval: 20000, parts: ["Toyota 17801-YZZ050", "Mann C 25 017"] },
          cabin: { interval: 20000, parts: ["Toyota 87139-YZZ010", "Mann CU 2755"] },
          fuel: { interval: 40000, parts: ["Toyota 23390-0L010", "Denso DFF-923"] }
        },
        sparkPlugs: { interval: 100000, parts: ["NGK LFR6AIX-11", "Denso SK20HR11"] },
        brakePads: {
          front: { interval: 40000, parts: ["Toyota 04465-0K060", "TRW GDB3469", "Bosch 0 986 494 020"] },
          rear: { interval: 60000, parts: ["Toyota 04466-0K060", "TRW GDB3470", "ATE 13046146123"] }
        },
        brakeDiscs: { front: 80000, rear: 100000 },
        timing: { type: "—Ü–µ–ø—å", check: 100000, replace: 200000 },
        tires: {
          size: "195/65 R15",
          wheel: "6.5J√ó15",
          pressure: { front: "2.3", rear: "2.2" }
        },
        notes: ["HV-–±–∞—Ç–∞—Ä–µ—è: –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 40 000 –∫–º"]
      },
      "fit 2020": {
        name: { ru: "Honda Fit (2020)", en: "Honda Fit (2020)" },
        intervals: 10000,
        oil: {
          every: 10000,
          type: "0W-20",
          brands: ["Honda HTO-0W20 (08200-9007)", "Idemitsu Zepro 0W-20", "Mobil 1 0W-20"]
        },
        filters: {
          oil: { interval: 10000, parts: ["Honda 15400-PLM-A02", "Mann W 701/61", "Bosch 3332"] },
          air: { interval: 20000, parts: ["Honda 17220-PLM-A01", "Mann C 25 016"] },
          cabin: { interval: 20000, parts: ["Honda 17641-PLM-A01", "Mann CU 2750"] },
          fuel: { interval: 40000, parts: ["Honda 17040-PLM-A01", "Bosch 0 450 956 080"] }
        },
        sparkPlugs: { interval: 100000, parts: ["NGK SILZKR7B11", "Denso SIKR8B11"] },
        brakePads: {
          front: { interval: 35000, parts: ["Honda 45022-TG5-A01", "Akebono ACT1108", "Bosch 0 986 494 021"] },
          rear: { interval: 50000, parts: ["Honda 43022-TG5-A01", "TRW GDB2278", "Textar 2400301"] }
        },
        brakeDiscs: { front: 70000, rear: 90000 },
        timing: { type: "—Ä–µ–º–µ–Ω—å", check: 60000, replace: 120000 },
        tires: {
          size: "185/60 R15",
          wheel: "6J√ó15",
          pressure: { front: "2.3", rear: "2.2" }
        },
        notes: ["CVT-–∂–∏–¥–∫–æ—Å—Ç—å: Honda HCF-2 (08200-9003)"]
      },
      "escudo 2015": {
        name: { ru: "Suzuki Escudo (2015)", en: "Suzuki Vitara (2015)" },
        intervals: 15000,
        oil: {
          every: 15000,
          type: "5W-30",
          brands: ["Suzuki 5W-30 (99000-45009)", "Shell Helix Ultra 5W-30", "Mobil Super 3000 5W-30"]
        },
        filters: {
          oil: { interval: 15000, parts: ["Suzuki 16510-85G00", "Mann W 9004", "Bosch 3322"] },
          air: { interval: 30000, parts: ["Suzuki 13780-87J00", "Mann C 35 005"] },
          cabin: { interval: 30000, parts: ["Suzuki 15530-87J00", "Mann CU 2555"] },
          fuel: { interval: 60000, parts: ["Suzuki 15210-84G00", "Bosch 0 450 956 081"] }
        },
        sparkPlugs: { interval: 60000, parts: ["NGK LKAR8AIX-9", "Denso K20HR-U9"] },
        brakePads: {
          front: { interval: 45000, parts: ["Suzuki 52021-85G00", "TRW GDB4418", "Bosch 0 986 494 022"] },
          rear: { interval: 65000, parts: ["Suzuki 52022-85G00", "Textar 2400401", "ATE 13046146124"] }
        },
        brakeDiscs: { front: 90000, rear: 120000 },
        timing: { type: "—Ä–µ–º–µ–Ω—å", check: 60000, replace: 100000 },
        tires: {
          size: "215/60 R17",
          wheel: "7J√ó17",
          pressure: { front: "2.3", rear: "2.3" }
        },
        notes: ["–ú–∞—Å–ª–æ —Ä–∞–∑–¥–∞—Ç–∫–∏: Suzuki ATF 3309"]
      },
      "xv 2019": {
        name: { ru: "Subaru XV (2019)", en: "Subaru XV (2019)" },
        intervals: 10000,
        oil: {
          every: 10000,
          type: "0W-20",
          brands: ["Subaru 0W-20 (SOA748V1410)", "Idemitsu Zepro Touring 0W-20", "Mobil 1 0W-20"]
        },
        filters: {
          oil: { interval: 10000, parts: ["Subaru 15208AA160", "Mann W 701/60", "Bosch 3330"] },
          air: { interval: 20000, parts: ["Subaru 16546AA060", "Mann C 35 003"] },
          cabin: { interval: 20000, parts: ["Subaru H7110AC000", "Mann CU 2964"] },
          fuel: { interval: 40000, parts: ["Subaru 42072FG000", "Bosch 0 450 956 082"] }
        },
        sparkPlugs: { interval: 100000, parts: ["NGK SILZFR6A11", "Denso SIKR8B11"] },
        brakePads: {
          front: { interval: 40000, parts: ["Subaru 26295FG000", "TRW GDB3788", "Bosch 0 986 494 023"] },
          rear: { interval: 55000, parts: ["Subaru 26625FG000", "Textar 2400501", "ATE 13046146125"] }
        },
        brakeDiscs: { front: 80000, rear: 100000 },
        timing: { type: "—Ü–µ–ø—å", check: 100000, replace: null },
        tires: {
          size: "225/55 R18",
          wheel: "7J√ó18",
          pressure: { front: "2.4", rear: "2.3" }
        },
        notes: ["–ú–∞—Å–ª–æ –ê–ö–ü–ü: Subaru CVT Fluid (SOA477V1440)"]
      },
      "c200 2019": {
        name: { ru: "Mercedes C200 (2019)", en: "Mercedes-Benz C200 (2019)" },
        intervals: 15000,
        oil: {
          every: 15000,
          type: "0W-30 (MB 229.52)",
          brands: ["Mercedes 229.52 (A0019896803)", "Mobil 1 ESP 0W-30", "Castrol EDGE LL 0W-30"]
        },
        filters: {
          oil: { interval: 15000, parts: ["Mercedes A 001 184 66 02", "Mann W 913/2", "Hengst E97H"] },
          air: { interval: 30000, parts: ["Mercedes A 000 094 20 04", "Mann C 36 010"] },
          cabin: { interval: 30000, parts: ["Mercedes A 000 830 62 05", "Mann CU 3238"] },
          fuel: { interval: 60000, parts: ["Mercedes A 000 072 21 05", "Bosch 0 986 AF6 021"] }
        },
        sparkPlugs: { interval: 60000, parts: ["Bosch FQR8LE2+ (830099219)"] },
        brakePads: {
          front: { interval: 50000, parts: ["Mercedes A 006 420 76 20", "Bosch 0 986 AB4 274", "ATE 13046146126"] },
          rear: { interval: 70000, parts: ["Mercedes A 006 420 25 20", "TRW GDB4420", "Textar 2400601"] }
        },
        brakeDiscs: { front: 100000, rear: 120000 },
        timing: { type: "—Ü–µ–ø—å", check: 120000, replace: null },
        tires: {
          size: "225/50 R17 (F), 245/45 R17 (R)",
          wheel: "8J√ó17 (F), 8.5J√ó17 (R)",
          pressure: { front: "2.3", rear: "2.4" }
        },
        notes: ["–û—Ö–ª–∞–∂–¥–∞—é—â–∞—è –∂–∏–¥–∫–æ—Å—Ç—å: Mercedes G 05 (A0019700103)"]
      }
    };

    function human(km) {
      return km >= 1000 ? Math.floor(km / 1000) + " —Ç—ã—Å. –∫–º" : km + " –∫–º";
    }

    function findCar(query) {
      const q = query.toLowerCase();
      if (q.includes('prius') && (q.includes('2021') || q.includes('21'))) return cars['prius 2021'];
      if (q.includes('fit') && q.includes('2020')) return cars['fit 2020'];
      if ((q.includes('escudo') || q.includes('vitara')) && q.includes('2015')) return cars['escudo 2015'];
      if (q.includes('xv') && q.includes('2019')) return cars['xv 2019'];
      if (q.includes('c200') && q.includes('2019')) return cars['c200 2019'];
      return null;
    }

    function generateReport(car, mileage) {
      const t = translations[currentLang];
      const nextTO = Math.ceil(mileage / car.intervals) * car.intervals;
      const diff = nextTO - mileage;
      const isOverdue = diff < 0;

      let html = `
        <div class="card" style="border-left: 4px solid var(--accent);">
          <h2>${t.nextTO}</h2>
          <p style="font-size:1.4rem;font-weight:600;">
            ${human(nextTO)}
            <br><small>
              ${isOverdue ? t.overdue : t.dueIn} ${Math.abs(diff)} ${t.km}
            </small>
          </p>
        </div>
      `;

      // –ú–∞—Å–ª–æ –∏ —Ñ–∏–ª—å—Ç—Ä—ã ‚Äî –∫–∞–∫ —Ä–∞–Ω—å—à–µ
      html += `<div class="card"><h3>${t.oil}</h3><p>${car.oil.type} ‚Äî –∫–∞–∂–¥—ã–µ ${human(car.oil.every)}</p>`;
      html += `<p class="small">–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ:<br>${car.oil.brands.join('<br>')}</p></div>`;

      html += `<div class="card"><h3>${t.filters}</h3><ul>`;
      html += `<li>–ú–∞—Å–ª—è–Ω—ã–π ‚Äî ${human(car.filters.oil.interval)}<br><span class="small">${car.filters.oil.parts.join(', ')}</span></li>`;
      html += `<li>–í–æ–∑–¥—É—à–Ω—ã–π ‚Äî ${human(car.filters.air.interval)}<br><span class="small">${car.filters.air.parts.join(', ')}</span></li>`;
      html += `<li>–°–∞–ª–æ–Ω–Ω—ã–π ‚Äî ${human(car.filters.cabin.interval)}<br><span class="small">${car.filters.cabin.parts.join(', ')}</span></li>`;
      if (car.filters.fuel) {
        html += `<li>–¢–æ–ø–ª–∏–≤–Ω—ã–π ‚Äî ${human(car.filters.fuel.interval)}<br><span class="small">${car.filters.fuel.parts.join(', ')}</span></li>`;
      }
      html += `</ul></div>`;

      // === –¢–û–†–ú–û–ó–ù–´–ï –ö–û–õ–û–î–ö–ò ‚Äî –° –ê–†–¢–ò–ö–£–õ–ê–ú–ò ===
      html += `<div class="card"><h3>${t.brakes}</h3>`;
      html += `<h4>${t.brakeFront}</h4>`;
      html += `<p>–ó–∞–º–µ–Ω–∞ ‚Äî ${human(car.brakePads.front.interval)}</p>`;
      html += `<p class="small">${car.brakePads.front.parts.join(', ')}</p>`;

      html += `<h4>${t.brakeRear}</h4>`;
      html += `<p>–ó–∞–º–µ–Ω–∞ ‚Äî ${human(car.brakePads.rear.interval)}</p>`;
      html += `<p class="small">${car.brakePads.rear.parts.join(', ')}</p>`;
      html += `</div>`;

      // –°–≤–µ—á–∏
      if (car.sparkPlugs) {
        html += `<div class="card"><h3>${t.sparkPlugs}</h3>`;
        html += `<p>–ó–∞–º–µ–Ω–∞ ‚Äî ${human(car.sparkPlugs.interval)}</p>`;
        html += `<p class="small">–ê—Ä—Ç–∏–∫—É–ª—ã: ${car.sparkPlugs.parts.join(', ')}</p></div>`;
      }

      // –ì–†–ú
      if (car.timing) {
        html += `<div class="card"><h3>${t.timing} (${car.timing.type})</h3>`;
        html += `<p>–ü—Ä–æ–≤–µ—Ä–∫–∞ ‚Äî ${human(car.timing.check)}`;
        if (car.timing.replace) html += `<br>–ó–∞–º–µ–Ω–∞ ‚Äî ${human(car.timing.replace)}`;
        html += `</p></div>`;
      }

      // –®–∏–Ω—ã
      if (car.tires) {
        html += `
          <div class="card">
            <h3>${t.wheels}</h3>
            <ul>
              <li>–†–∞–∑–º–µ—Ä —à–∏–Ω: <b>${car.tires.size}</b></li>
              <li>–î–∏—Å–∫–∏: <b>${car.tires.wheel}</b></li>
              <li>–î–∞–≤–ª–µ–Ω–∏–µ (–±–∞—Ä): –ø–µ—Ä–µ–¥ ‚Äî <b>${car.tires.pressure.front}</b>, –∑–∞–¥ ‚Äî <b>${car.tires.pressure.rear}</b></li>
            </ul>
          </div>
        `;
      }

      // –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
      if (car.notes && car.notes.length) {
        html += `<div class="card"><h3>${t.recommendations}</h3><ul>`;
        car.notes.forEach(n => html += `<li>${n}</li>`);
        html += `</ul></div>`;
      }

      return html;
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    setTheme(currentTheme);
    setLanguage(currentLang);

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
    document.getElementById('langToggle').addEventListener('click', () => {
      setLanguage(currentLang === 'ru' ? 'en' : 'ru');
    });

    document.getElementById('themeToggle').addEventListener('click', () => {
      setTheme(currentTheme === 'light' ? 'dark' : 'light');
    });

    document.getElementById('submitBtn').addEventListener('click', () => {
      const vin = document.getElementById('vin').value.trim();
      const mileage = parseInt(document.getElementById('mileage').value) || 0;

      if (!vin) return alert('–í–≤–µ–¥–∏—Ç–µ VIN –∏–ª–∏ –º–æ–¥–µ–ª—å');
      if (mileage < 0 || mileage > 500000) return alert('–ü—Ä–æ–±–µ–≥ –æ—Ç 0 –¥–æ 500 000 –∫–º');

      const car = findCar(vin);
      const resultDiv = document.getElementById('result');

      if (car) {
        resultDiv.innerHTML = generateReport(car, mileage);
        resultDiv.style.display = 'block';
      } else {
        resultDiv.innerHTML = `<div class="card"><h2>–ê–≤—Ç–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</h2><p>–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ: Prius 2021, Fit 2020, Escudo 2015, XV 2019, C200 2019</p></div>`;
        resultDiv.style.display = 'block';
      }
    });

    document.addEventListener('keypress', e => {
      if (e.key === 'Enter') document.getElementById('submitBtn').click();
    });
  </script>
</body>
</html>